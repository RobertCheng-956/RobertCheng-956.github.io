<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Ray Cheng">
    
    <title>
        
            ä½¿ç”¨langchainè°ƒç”¨GPTè¿›è¡ŒåŒè¯­å¯¹é½ |
        
        Ray
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
        <link rel="shortcut icon" href="/images/x-rays.png">
    
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.0.5/source/font/css/fontawesome.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.0.5/source/font/css/regular.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.0.5/source/font/css/solid.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.0.5/source/font/css/brands.min.css">
    
        
            
                
<link rel="stylesheet" href="/css/custom-1.css">

            
        
    
    <script class="keep-theme-configurations">
    const KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"zh-CN","path":"search.json"}
    KEEP.theme_config = {"base_info":{"primary_color":"#0066cc","title":"Ray","author":"Ray Cheng","avatar":"/images/avatar.svg","logo":"/images/x-rays.png","favicon":"/images/x-rays.png"},"menu":{"Tags":"/tags","Archives":"/archives","About":"/about","GPT":"https://chat-gpt-next-web-robertcheng-956s-projects.vercel.app/","English":"https://smartlanguage.hashnode.dev/"},"first_screen":{"enable":true,"background_img":null,"background_img_dark":"/images/bg.svg","description":"è¯­è¨€æ²Ÿé€šä¸–ç•Œï¼ŒæŠ€æœ¯ä¼ æ’­æœªæ¥","hitokoto":false},"social_contact":{"enable":true,"links":{"github":"https://github.com/RobertCheng-956","hashnode":"https://smartlanguage.hashnode.dev/","weixin":null,"qq":null,"weibo":null,"zhihu":null,"twitter":null,"facebook":null,"email":null}},"scroll":{"progress_bar":true,"percent":false,"hide_header":true},"home":{"category":false,"tag":true,"announcement":null},"post":{"author_badge":{"enable":true,"level_badge":false,"custom_badge":["ç‚’ç²‰","ç‚’é¢","è‹±ç –ç”Ÿ"]},"word_count":{"wordcount":true,"min2read":false},"datetime_format":"YYYY-MM-DD HH:mm:ss","copyright_info":false,"share":true,"reward":{"enable":false,"img_link":null,"text":null}},"code_block":{"tools":{"enable":true,"style":"mac"},"highlight_theme":"default"},"toc":{"enable":true,"number":true,"expand_all":true,"init_open":true,"layout":"right"},"website_count":{"busuanzi_count":{"enable":false,"site_uv":false,"site_pv":false,"page_pv":false}},"local_search":{"enable":true,"preload":true},"comment":{"enable":true,"use":"waline","valine":{"appid":null,"appkey":null,"server_urls":null,"placeholder":null},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null,"proxy":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.21"},"waline":{"server_url":"https://blog-waline-comment-n8zq4tn4g-robertcheng-956s-projects.vercel.app/","reaction":false,"version":2},"giscus":{"repo":null,"repo_id":null,"category":"Announcements","category_id":null,"reactions_enabled":false},"artalk":{"server":null},"disqus":{"shortname":null}},"rss":{"enable":false},"lazyload":{"enable":true},"cdn":{"enable":true,"provider":"jsdelivr"},"pjax":{"enable":false},"footer":{"since":2020,"word_count":true,"icp":{"enable":false,"record_code":null,"url":"https://beian.miit.gov.cn"},"site_deploy":{"enable":true,"provider":"github","url":null},"shields_style":{"enable":false,"custom":[{"link_url":null,"img_url":null}]}},"inject":{"enable":true,"css":["/css/custom-1.css"],"js":[null]},"root":"","version":"4.0.5"}
    KEEP.language_ago = {"second":"%s ç§’å‰","minute":"%s åˆ†é’Ÿå‰","hour":"%s å°æ—¶å‰","day":"%s å¤©å‰","week":"%s å‘¨å‰","month":"%s ä¸ªæœˆå‰","year":"%s å¹´å‰"}
    KEEP.language_code_block = {"copy":"å¤åˆ¶ä»£ç ","copied":"å·²å¤åˆ¶","fold":"æŠ˜å ä»£ç å—","folded":"å·²æŠ˜å "}
    KEEP.language_copy_copyright = {"copy":"å¤åˆ¶ç‰ˆæƒä¿¡æ¯","copied":"å·²å¤åˆ¶","title":"åŸæ–‡æ ‡é¢˜","author":"åŸæ–‡ä½œè€…","link":"åŸæ–‡é“¾æ¥"}
  </script>
<meta name="generator" content="Hexo 7.0.0"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
</div>


<main class="page-container border-box">

    <!-- home first screen  -->
    

    <!-- page content -->
    <div class="page-main-content border-box">
        <div class="page-main-content-top">
            
<header class="header-wrapper">

    <div class="border-box header-content">
        <div class="left border-box">
            
                <a class="logo-image border-box" href="/">
                    <img src="/images/x-rays.png">
                </a>
            
            <a class="site-name border-box" href="/">
               Ray
            </a>
        </div>

        <div class="right border-box">
            <div class="pc">
                <ul class="menu-list">
                    <li class="menu-item">
                        <a class=""
                           href="/"
                        >é¦–é¡µ</a>
                    </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >æ ‡ç­¾</a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >å½’æ¡£</a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >å…³äº</a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               target="_blank" rel="noopener" href="https://chat-gpt-next-web-robertcheng-956s-projects.vercel.app/"
                            >GPT</a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               target="_blank" rel="noopener" href="https://smartlanguage.hashnode.dev/"
                            >ENGLISH</a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas search fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            <li class="drawer-menu-item flex-center">
                <a class=""
                   href="/"
                >é¦–é¡µ</a>
            </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags"
                    >æ ‡ç­¾</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives"
                    >å½’æ¡£</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about"
                    >å…³äº</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       target="_blank" rel="noopener" href="https://chat-gpt-next-web-robertcheng-956s-projects.vercel.app/"
                    >GPT</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       target="_blank" rel="noopener" href="https://smartlanguage.hashnode.dev/"
                    >ENGLISH</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle border-box">

            <div class="main-content border-box">
                

                    
<div class="fade-in-down-animation">
    <div class="post-page-container border-box">
        <div class="post-content-container border-box">
            

            <div class="post-content-bottom border-box">
                
                    <div class="post-title">
                        ä½¿ç”¨langchainè°ƒç”¨GPTè¿›è¡ŒåŒè¯­å¯¹é½
                    </div>
                

                
                    <div class="post-header border-box">
                        
                            <div class="avatar-box border-box">
                                <img src="/images/avatar.svg">
                            </div>
                        
                        <div class="info-box">
                            <div class="author border-box">
                                <span class="name">Ray Cheng</span>
                                
                                    <span class="author-badge">ç‚’ç²‰</span>
                                
                            </div>
                            <div class="meta-info border-box">
                                

<div class="post-meta-info-container border-box post">
    <div class="post-meta-info border-box">
        

        
            <span class="meta-info-item post-create-date">
                <i class="icon fa-solid fa-calendar-check"></i>&nbsp;
                <span class="pc">2023-12-24 08:10:20</span>
                <span class="mobile">2023-12-24 08:10</span>
            </span>

            <span class="meta-info-item post-update-date">
                <i class="icon fa-solid fa-file-pen"></i>&nbsp;
                <span class="pc" data-updated="Tue Jan 23 2024 15:16:42 GMT+0800">2024-01-23 15:16:42</span>
            </span>
        

        

        
            <span class="post-tag meta-info-item border-box">
                <i class="icon fas fa-tags"></i>&nbsp;
                <ul class="post-tag-ul">
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Langchain/">Langchain</a></li>
                        
                    
                </ul>
            </span>
        

        
        
            <span class="meta-info-item post-wordcount">
                <i class="icon fas fa-file-word"></i>&nbsp;<span>4.4k å­—</span>
            </span>
        
        
        
    </div>

    
</div>

                            </div>
                        </div>
                    </div>
                

                <div class="post-content keep-markdown-body">
                    

                    <p>æœ¬æ¬¡ä½¿ç”¨langchainè°ƒç”¨chatgptæ¥è¿›è¡Œæ–‡æœ¬å¯¹é½æœ€å…³é”®çš„åœ°æ–¹å°±åœ¨äºæç¤ºè¯çš„å†™æ³•ï¼Œåœ¨å­¦ä¹ äº†æ ¼å¼åŒ–è¾“å‡ºï¼Œè§£æè¾“å‡ºä¹‹åï¼Œæˆ‘å°±å¼€å§‹æƒ³åˆ°äº†ä½¿ç”¨gptè¿›è¡Œå¯¹é½ã€‚</p>
<p>è¯´å¹²å°±å¹²!!!ğŸ’ª</p>
<p>å…³äºè°ƒç”¨langchainçš„ä¸€äº›åŸºæœ¬ç”¨æ³•ï¼Œæˆ‘æ˜¯è§‚çœ‹çš„å´æ©è¾¾è€å¸ˆçš„ç½‘è¯¾ï¼Œè®²çš„å¾ˆæ¸…æ™°ï¼ŒåŒæ—¶è¿˜æœ‰ç½‘é¡µçš„jupyterèƒ½å¤Ÿé…å¥—è¿è¡Œï¼Œå…å—é…ç¯å¢ƒçš„è‹¦ï¼Œä½†æ˜¯åœ¨è‡ªå·±ç”µè„‘ä¸Šè¿è¡Œçš„æ—¶å€™ï¼Œæ€»ä¼šå‡ºé—®é¢˜ğŸ˜­</p>
<p>ä½¿ç”¨gptå¯¹é½ï¼ŒåŸç†æ¯”è¾ƒè¯´èµ·æ¥æ¯”è¾ƒç®€å•(ä½†æ˜¯å®é™…æ“ä½œèµ·æ¥è¿˜æ˜¯å‡ºäº†ä¸å°‘é—®é¢˜)ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼šè¯»å–docæ–‡æ¡£</li>
<li>ç¬¬äºŒæ­¥ï¼šè°ƒç”¨APIï¼Œè¿›è¡Œæ ¼å¼åŒ–è¾“å‡º</li>
<li>ç¬¬ä¸‰æ­¥ï¼šè¾“å‡ºä¸ºexcelæ–‡æ¡£ã€‚</li>
</ul>
<p>éš¾ç‚¹å°±åœ¨ç¬¬äºŒæ­¥ï¼š</p>
<ul>
<li><p>è°ƒç”¨gptè¿›è¡Œå¯¹é½ã€‚</p>
</li>
<li><p>ä½¿ç”¨<code>ResponseSchema</code>å’Œ<code>StructuredOutputParser</code>æ¥æ ¼å¼åŒ–gptè¾“å‡ºæ ¼å¼ï¼Œå¹¶è§£æã€‚</p>
</li>
</ul>
<h2 id="ç¬¬ä¸€æ¬¡å°è¯•"><a href="#ç¬¬ä¸€æ¬¡å°è¯•" class="headerlink" title="ç¬¬ä¸€æ¬¡å°è¯•"></a>ç¬¬ä¸€æ¬¡å°è¯•</h2><p>åœ¨æˆ‘çœ‹æ¥ï¼Œå®ç°å¯¹é½åº”è¯¥åˆ†ä¸ºä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥å…ˆåˆ†å¥ï¼Œç¬¬äºŒæ­¥å†å¯¹é½ã€‚</p>
<p>ä¸€å¼€å§‹æˆ‘å°†è¿™ä¸¤æ­¥éƒ½ç”¨gptæ¥å®Œæˆï¼Œé€šè¿‡æç¤ºè¯ï¼Œæ¥è®©gptå…ˆåˆ†å¥å†è¿›è¡Œå¯¹é½ï¼Œäºæ˜¯æˆ‘ç¬¬ä¸€æ¬¡çš„æç¤ºè¯å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">template = <span class="string">&quot;&quot;&quot;I want you to act as an translator who good at\</span></span><br><span class="line"><span class="string">English and Chinese. I will give you a text in which there one Chinese\</span></span><br><span class="line"><span class="string">paragraph and one English paragraph. I need you to seperate the English\</span></span><br><span class="line"><span class="string">paragraph into sentences, and also seperate the Chinese paragras into\</span></span><br><span class="line"><span class="string">sentences according to the meaning of each English sentence. </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Remember that not change any word of paragpraphs but only seperate the paragraphs.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#123;format_instructions&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">text: &#123;text&#125;&quot;&quot;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶å€™format_instructionsæ˜¯è¿™æ ·çš„ï¼Œä¸€å¼€å§‹å°±æ˜¯æƒ³åˆ°çš„æ”¾å…¥åˆ°ä¸¤ä¸ªåˆ—è¡¨ä¸­å»ï¼Œå…¶å®ä¸€å¼€å§‹æˆ‘ä¹Ÿæƒ³åˆ°äº†ä½¿ç”¨jsonï¼Œä½†æ˜¯æˆ‘è§‰å¾—ç›´æ¥æ”¾å…¥</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Chinese_sentences= ResponseSchema(name=<span class="string">&quot;Chinese_sentences&quot;</span>, <span class="built_in">type</span> = <span class="string">&#x27;list&#x27;</span>, description = <span class="string">&#x27;add each Chiense sentences into this list&#x27;</span>)</span><br><span class="line">English_sentences= ResponseSchema(name=<span class="string">&quot;English_sentences&quot;</span>, <span class="built_in">type</span> = <span class="string">&#x27;list&#x27;</span>,description = <span class="string">&#x27;add each English sentence into this list&#x27;</span>)response_schemas = [Chinese_sentences,English_sentences]</span><br><span class="line">output_parser = StructuredOutputParser.from_response_schemas(response_schemas)</span><br><span class="line">format_instructions = output_parser.get_format_instructions()</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯è¾“å…¥çš„æç¤ºè¯ï¼Œå› ä¸ºä¸€å¼€å§‹æˆ‘çš„æ€è·¯å°±æ˜¯ï¼Œä»¿ç…§å‰é¢é‚£ä½åŒå­¦çš„æ€è·¯ï¼Œæ¥è¿›è¡Œæç¤ºè¯çš„ä¹¦å†™ã€‚æœ€åè¿™ä¸ªæç¤ºè¯å¾—åˆ°çš„ç»“æœè¿˜ä¸é”™ï¼ŒåŸºæœ¬æ˜¯100%çš„æ­£ç¡®ç‡ã€‚</p>
<p>ä½†æ˜¯åé¢åœ¨æ”¹å˜å¯¹é½çš„æ–‡æœ¬æ—¶å°±å‡ºç°é—®é¢˜äº†ã€‚</p>
<p>å› ä¸ºä¸€å¼€å§‹æˆ‘çš„éœ€æ±‚æ˜¯å¯¹é½è‡ªå·±è¯‘çš„è‹±è¯‘æ±‰æ–‡æœ¬ï¼Œè‹±æ–‡åŸæ–‡æ˜¯æˆ‘å¯¼å¸ƒç½®çš„ä»»åŠ¡ï¼Œè¦æ±‚è¯‘å®Œä¹‹åï¼Œç»™ä¸€ä¸ªå¥å¥å¯¹å…¶çš„excelæ–‡æœ¬ç»™å¥¹ã€‚è¿™æ˜¯æˆ‘ä¸€å¼€å§‹çš„éœ€æ±‚ï¼Œç”±äºæˆ‘åœ¨ä½¿ç”¨gptè¿›è¡Œç¿»è¯‘çš„è¯‘åç¼–è¾‘çš„æ—¶å€™ï¼Œæˆ‘å°±å·²ç»ä½¿ç”¨gptå°†ç¿»è¯‘çš„ä¸­æ–‡å¥å­ç½®äºè‹±æ–‡å¥å­ä¹‹åäº†ï¼Œå¯¼è‡´æˆ‘æœ¬æ¥çš„æ–‡æœ¬å…¶å®åŸºæœ¬å°±æ˜¯æ ¼å¼æ¯”è¾ƒå·¥æ•´çš„ã€‚æ‰€ä»¥ä¸€å¼€å§‹ä½¿ç”¨è¿™æ®µæç¤ºè¯çš„æ—¶å€™ï¼Œè¾“å‡ºçš„excelæ–‡æ¡£å¯¹é½çš„æ•ˆæœååˆ†ä¸é”™ã€‚</p>
<p>ä¹‹åæˆ‘çš„åŒå­¦è®©æˆ‘è¯•ä¸€è¯•æ™®é€šçš„ä¸­è‹±æ–‡åˆ†å¼€çš„æ–‡æœ¬ï¼Œäºæ˜¯é—®é¢˜å°±å‡ºç°äº†ã€‚</p>
<h2 id="ç¬¬äºŒæ¬¡å°è¯•"><a href="#ç¬¬äºŒæ¬¡å°è¯•" class="headerlink" title="ç¬¬äºŒæ¬¡å°è¯•"></a>ç¬¬äºŒæ¬¡å°è¯•</h2><p>å†ä½¿ç”¨è¿™æ ·çš„æç¤ºè¯ï¼Œæˆ‘å°±å‘ç°ï¼Œgptå¹¶ä¸èƒ½å®Œå…¨å°†å¥å­å®Œå…¨åˆ†å¼€ï¼Œæˆ‘æ˜¯è®©gptä»¥ä¸­æ–‡ä¸ºä¸»ï¼Œæ¥å¯¹é½è‹±æ–‡ï¼Œå°±å‡ºç°äº†ä¸­æ–‡æ–‡æœ¬gptæ²¡åŠæ³•å®Œå…¨å¥å¥å¯¹é½ï¼Œå„ç§æç¤ºè¯éƒ½å†™äº†å¥½å‡ éï¼Œç±»ä¼¼ä»¥ä¸‹è¿™ç§ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„ï¼Œæ€»ä¹‹å†™çš„å·²ç»å¾ˆè¯¦ç»†äº†ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">template = <span class="string">&quot;&quot;&quot;ä½ ç°åœ¨æ˜¯ä¸€ä¸ªä¸­è‹±æ–‡æœ¬å¯¹é½å¸ˆï¼Œç°åœ¨ä½ éœ€è¦å°†ä¸­è‹±æ–‡åˆ†å¥åæŒ‰ç…§å¥æ„å¯¹é½ï¼ŒåŠæ³•æ˜¯è¿™æ ·ï¼š\</span></span><br><span class="line"><span class="string">    é¦–å…ˆå°†ä¸­è‹±æ–‡åˆ†å¥å¹¶åˆ†åˆ«æ’åºï¼Œç„¶åæ‹¿å‡ºä¸­æ–‡çš„ç¬¬ä¸€å¥ï¼Œæ£€æµ‹è‹±æ–‡ç¬¬2å¥å¥æ„æ˜¯å¦åœ¨ä¸­æ–‡çš„ç¬¬ä¸€å¥ä¸­ã€‚\</span></span><br><span class="line"><span class="string">    å¦‚æœ‰ï¼Œåˆ™å°†è‹±æ–‡çš„1ã€2å¥ä¸€èµ·ä¸ä¸­æ–‡çš„ç¬¬ä¸€å¥å¯¹é½ï¼Œå¦‚æ²¡æœ‰ï¼Œåˆ™åªå°†è‹±æ–‡çš„ç¬¬ä¸€å¥ä¸ä¸­æ–‡çš„ç¬¬ä¸€å¥å¯¹é½ï¼›\</span></span><br><span class="line"><span class="string">    ç„¶åæ£€æµ‹ä¸­æ–‡çš„ç¬¬äºŒå¥å¥æ„æ˜¯å¦åœ¨è‹±æ–‡çš„ç¬¬ä¸€å¥ä¸­ã€‚å¦‚æœ‰ï¼Œåˆ™å°†ä¸­æ–‡çš„1ã€2å¥ä¸€èµ·ä¸è‹±æ–‡çš„ç¬¬ä¸€å¥å¯¹é½ï¼Œå¦‚æ²¡æœ‰ï¼Œ\</span></span><br><span class="line"><span class="string">    åˆ™åªå°†ä¸­æ–‡çš„ç¬¬ä¸€å¥ä¸è‹±æ–‡çš„ç¬¬ä¸€å¥å¯¹é½ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå°†æˆ‘å‘ç»™ä½ çš„æ‰€æœ‰æ–‡æœ¬æŒ‰ç…§å¥æ„å¯¹é½ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#123;format_instructions&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">text: &#123;text&#125;&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>è€Œä¸”æˆ‘åœ¨gptçš„ç½‘é¡µä¸­å®éªŒäº†è¿™äº›æç¤ºè¯ï¼Œä¹Ÿæ˜¯è¡Œå¾—é€šçš„ï¼Œåˆ†å‡ºæ¥çš„å¥å­ä¹Ÿæ˜¯æ¯”è¾ƒç»†è‡´ï¼Œè€Œä¸”å‡†ç¡®ç‡æ¯”è¾ƒé«˜ã€‚ä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œé€šè¿‡è°ƒç”¨apiçš„æ–¹å¼ï¼Œå‡ºæ¥ç»“æœå°±æ˜¯ä¸è¡Œï¼Œæˆ‘çŒœæƒ³æ˜¯å¯èƒ½æ˜¯å—åˆ°äº†format_instructionsçš„ä¸€äº›å½±å“ã€‚</p>
<p>æˆ‘æˆ‘ä¸€å¼€å§‹ä»ç„¶æ˜¯æŒ‰ç…§ä¹‹å‰çš„ResponseSchemaæ¥å›ºå®šè¾“å‡ºï¼Œæˆ‘å°±æ€€ç–‘æ˜¯ä¸æ˜¯ï¼Œæˆ‘æœ€åè®©å¥¹å°†è¾“å‡ºç»“æœè¾“å‡ºåˆ°ä¸¤ä¸ªåˆ—è¡¨ä¸­ï¼Œå½±å“äº†gptå¯¹é½ã€‚äºæ˜¯æˆ‘å¼€å§‹æ€è€ƒå¹²è„†ç›´æ¥è®©ä»–å°†ä¸­è‹±æ–‡å¥å­å¯¹ï¼Œè¾“å‡ºä¸ºé”®å€¼å¯¹ï¼Œæ”¾åˆ°ä¸€ä¸ªjsonæ ¼å¼ä¸­ã€‚äºæ˜¯è¿™æ—¶format_instructionså°±æ”¹ä¸ºäº†ä»¥ä¸‹è¿™æ ·ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">aligned_sentences= ResponseSchema(name=<span class="string">&quot;aligned_sentences&quot;</span>, </span><br><span class="line">    description = <span class="string">&#x27;add each Chiense and English sentence pair into here as a key-value pair&#x27;</span>)</span><br><span class="line">response_schemas = [aligned_sentences]</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ä¹‹åå‘¢ï¼Œè¾“å‡ºçš„ç»“æœè¦å¥½ä¸€ç‚¹ï¼Œä½†æ˜¯ä»ç„¶ä¸èƒ½å®Œå…¨å°†å¥å­åˆ†å¼€ï¼Œè¾¾ä¸åˆ°æ•ˆæœï¼Œè¿˜æ²¡æœ‰abbyy aligneråˆ†å¾—å¥½ã€‚</p>
<h2 id="ç¬¬ä¸‰æ¬¡å°è¯•"><a href="#ç¬¬ä¸‰æ¬¡å°è¯•" class="headerlink" title="ç¬¬ä¸‰æ¬¡å°è¯•"></a>ç¬¬ä¸‰æ¬¡å°è¯•</h2><p>æˆ‘å°±å¼€å§‹æ€è€ƒï¼Œæ€ä¹ˆå†™æç¤ºè¯æ‰èƒ½è®©gptä¸¥æ ¼å°†æ®µè½åˆ†ä¸ºå¥å­ã€‚æˆ‘ç”šè‡³è¿˜å†™åˆ°ï¼Œè®©å®ƒæŒ‰ç…§æ ‡ç‚¹ç¬¦å·æ¥å°†ä¸­æ–‡å¥å­åˆ†å¼€ï¼Œä½†æ˜¯å®ƒä»ç„¶åˆ†ä¸å¼€ã€‚åœ¨å†™åˆ°æ ‡ç‚¹ç¬¦å·çš„æ—¶å€™uï¼Œæˆ‘çªç„¶å°±æƒ³åˆ°äº†ï¼Œæ—¢ç„¶æˆ‘è¦è®©ä»–æŠŠä¸­æ–‡å¥å­åˆ†å¼€ï¼Œæˆ‘ç›´æ¥ä½¿ç”¨å…¶ä»–åˆ†å¥çš„æ‰‹æ®µï¼Œå°†å¥å­åˆ†å¼€ï¼Œä¸å°±å¥½äº†å—ï¼Ÿç„¶åå†è®©gptå»è‹±æ–‡ä¸­ï¼ŒæŠŠä¸€ä¸ªä¸ªä¸­æ–‡å¥å­çš„è‹±æ–‡æ‰¾å‡ºæ¥ã€‚æ„Ÿè§‰å¯è¡Œï¼Œäºæ˜¯å°±ä½¿ç”¨jiebaåˆ†å¥ï¼Œç„¶åé—®é—®gptæ€ä¹ˆåˆ†ï¼Œå®ƒç›´æ¥å°±å‘Šè¯‰äº†æˆ‘ä»¥ä¸‹ä»£ç æ¥åˆ†å¥ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">split_sentences</span>(<span class="params">text</span>):</span><br><span class="line">    components = re.split(<span class="string">&#x27;([ã€‚ï¼ï¼Ÿ.!?:ï¼š])&#x27;</span>, text)  <span class="comment"># ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åˆ†å‰²å¥å­</span></span><br><span class="line">    sentences = [<span class="string">&quot;&quot;</span>.join(components[i:i+<span class="number">2</span>]) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(components)-<span class="number">1</span>, <span class="number">2</span>)]  <span class="comment"># å°†å¥å­å’Œæ ‡ç‚¹ç¬¦å·é‡æ–°ç»„åˆ</span></span><br><span class="line">    <span class="keyword">return</span> sentences</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹é‡Œå‘¢å°±ç»§ç»­ä¿®æ”¹æç¤ºè¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">template = <span class="string">&quot;&quot;&quot;ä½ ç°åœ¨æ˜¯ä¸€ä¸ªä¸­è‹±æ–‡æœ¬å¯¹é½å¸ˆï¼Œä½ å°†ä¼šå¾—åˆ°ä¸€ä¸ªå«æœ‰ä¸€ä¸ªä¸ªä¸­æ–‡å¥å­çš„åˆ—è¡¨å’Œä¸€ä¸ªè‹±æ–‡æ®µè½ï¼Œç°åœ¨ä½ éœ€è¦å°†è¿™ä¸€ä¸ªä¸ªä¸­æ–‡å¥å­çš„è‹±æ–‡ç¿»è¯‘åœ¨è‹±æ–‡æ®µè½ä¸­æ‰¾å‡ºæ¥\</span></span><br><span class="line"><span class="string">å¹¶å°†å®ƒä»¬å¯¹é½ä¸ºä¸€ä¸ªå¥å­å¯¹ã€‚æ¯”å¦‚ï¼Œä½ å…ˆä»å–ç¬¬ä¸€ä¸ªä¸­æ–‡å¥å­ï¼ŒæŒ‰ç…§è¿™ä¸ªä¸­æ–‡å¥å­çš„å¥æ„ï¼Œä»è‹±æ–‡æ®µè½å¼€å¤´å¼€å§‹åŒ¹é…ï¼Œå°†å’Œè¿™å¥ä¸­æ–‡å¥å­ç›¸åŒ¹é…çš„è‹±æ–‡å¥å­æ‹†åˆ†å‡ºæ¥ï¼ŒåŒè¿™å¥ä¸­æ–‡å¥å­å¯¹é½ã€‚\</span></span><br><span class="line"><span class="string">ç„¶åå°†è¿™ä¸€ä¸ªä¸­æ–‡å¥å­å’Œè‹±æ–‡å¥å­å¯¹é½ä¸ºä¸€ä¸ªå¥å­å¯¹å³å¯ã€‚ä¾æ¬¡å¯¹æ¯ä¸ªä¸­æ–‡å¥å­éƒ½æ‰§è¡Œè¿™ä¸€å¯¹é½æ“ä½œã€‚ç›´åˆ°å¯¹é½å®Œæ‰€æœ‰çš„ä¸­æ–‡å¥å­ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#123;format_instructions&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">text: &#123;text&#125;&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>æœ€ç»ˆçš„å‡ºæ¥çš„å¾ˆæ»¡æ„ï¼Œå‡ºæ¥çš„ç»“æœæ¯”alignerçš„æ›´å‡†ç¡®ï¼Œgptå®Œå…¨èƒ½å¤Ÿå°†æ¯å¥ä¸­æ–‡çš„å¯¹åº”çš„è‹±æ–‡åœ¨æ–‡ä¸­æ‰¾å‡ºæ¥ã€‚ä»¥ä¸‹æ˜¯éƒ¨åˆ†å¯¹é½çš„ç»“æœï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;```json\n&#123;\n    &quot;aligned_sentences&quot;: &#123;\n        &quot;ç¬¬äºŒï¼Œæˆ‘ä»¬å¿…é¡»å¤è‹ç»æµï¼Œæ¨åŠ¨å®ç°æ›´åŠ å¼ºåŠ²ã€ç»¿è‰²ã€å¥åº·çš„å…¨çƒå‘å±•ã€‚&quot;: &quot;Second, we must revitalize the economy and promote a more robust, green, and healthy global development.&quot;,\n        &quot;å‘å±•æ˜¯å®ç°äººæ°‘å¹¸ç¦çš„å…³é”®ã€‚&quot;: &quot;Development is the key to achieving the well-being of the people.&quot;,\n        &quot;é¢å¯¹ç–«æƒ…å¸¦æ¥çš„ä¸¥é‡å†²å‡»ï¼Œæˆ‘ä»¬è¦å…±åŒæ¨åŠ¨å…¨çƒå‘å±•è¿ˆå‘å¹³è¡¡åè°ƒåŒ…å®¹æ–°é˜¶æ®µã€‚&quot;: &quot;Faced with the severe impact of the pandemic, we must jointly propel global development towards a new stage of balance, coordination, and inclusiveness.&quot;,\n        &quot;åœ¨æ­¤ï¼Œæˆ‘æ„¿æå‡ºå…¨çƒå‘å±•å€¡è®®ï¼š&quot;: &quot;Here, I propose a Global Development Initiative:&quot;,\n        &quot;â€”â€”åšæŒå‘å±•ä¼˜å…ˆã€‚&quot;: &quot;- Adhere to development priority:&quot;,\n        &quot;å°†å‘å±•ç½®äºå…¨çƒå®è§‚æ”¿ç­–æ¡†æ¶çš„çªå‡ºä½ç½®ï¼ŒåŠ å¼ºä¸»è¦ç»æµä½“æ”¿ç­–åè°ƒï¼Œä¿æŒè¿ç»­æ€§ã€ç¨³å®šæ€§ã€å¯æŒç»­æ€§ï¼Œæ„å»ºæ›´åŠ å¹³ç­‰å‡è¡¡çš„å…¨çƒå‘å±•ä¼™ä¼´å…³ç³»ï¼Œæ¨åŠ¨å¤šè¾¹å‘å±•åˆä½œè¿›ç¨‹ååŒå¢æ•ˆï¼ŒåŠ å¿«è½å®è”åˆå›½2030å¹´å¯æŒç»­å‘å±•è®®ç¨‹ã€‚&quot;: &quot;Place development in a prominent position within the global macro-policy framework, strengthen policy coordination among major economies, maintain continuity, stability, and sustainability, build a more equal and balanced global development partnership, promote the coordinated and efficient progress of multilateral development cooperation processes, and accelerate the implementation of the United Nations 2030 Agenda for Sustainable Development.&quot;,\n        &quot;â€”â€”åšæŒä»¥äººæ°‘ä¸ºä¸­å¿ƒã€‚&quot;: &quot;- Adhere to people-centered development:&quot;,\n        &quot;åœ¨å‘å±•ä¸­ä¿éšœå’Œæ”¹å–„æ°‘ç”Ÿï¼Œä¿æŠ¤å’Œä¿ƒè¿›äººæƒï¼Œåšåˆ°å‘å±•ä¸ºäº†äººæ°‘ã€å‘å±•ä¾é äººæ°‘ã€å‘å±•æˆæœç”±äººæ°‘å…±äº«ï¼Œä¸æ–­å¢å¼ºæ°‘ä¼—çš„å¹¸ç¦æ„Ÿã€è·å¾—æ„Ÿã€å®‰å…¨æ„Ÿï¼Œå®ç°äººçš„å…¨é¢å‘å±•ã€‚&quot;: &quot;In the course of development, ensure and improve people\&#x27;s well-being, protect and promote human rights, ensure that development is for the people, relies on the people, and the benefits of development are shared by the people, constantly enhance the happiness, sense of gain, and sense of security of the people, and achieve comprehensive human development.&quot;,\n        &quot;â€”â€”åšæŒæ™®æƒ åŒ…å®¹ã€‚&quot;: &quot;- Adhere to inclusive development:&quot;,\n        &quot;å…³æ³¨å‘å±•ä¸­å›½å®¶ç‰¹æ®Šéœ€æ±‚ï¼Œé€šè¿‡ç¼“å€ºã€å‘å±•æ´åŠ©ç­‰æ–¹å¼æ”¯æŒå‘å±•ä¸­å›½å®¶å°¤å…¶æ˜¯å›°éš¾ç‰¹åˆ«å¤§çš„è„†å¼±å›½å®¶ï¼Œç€åŠ›è§£å†³å›½å®¶é—´å’Œå„å›½å†…éƒ¨å‘å±•ä¸å¹³è¡¡ã€ä¸å……åˆ†é—®é¢˜ã€‚&quot;: &quot;Pay attention to the special needs of developing countries, support developing countries, especially those facing particular difficulties, with debt relief, development assistance, and other means, focus on addressing the issues of imbalances and inadequacies in development among and within countries.&quot;,\n        &quot;â€”â€”åšæŒåˆ›æ–°é©±åŠ¨ã€‚&quot;: &quot;- Adhere to innovation-driven development:&quot;,\n        &quot;æŠ“ä½æ–°ä¸€è½®ç§‘æŠ€é©å‘½å’Œäº§ä¸šå˜é©çš„å†å²æ€§æœºé‡ï¼ŒåŠ é€Ÿç§‘æŠ€æˆæœå‘ç°å®ç”Ÿäº§åŠ›è½¬åŒ–ï¼Œæ‰“é€ å¼€æ”¾ã€å…¬å¹³ã€å…¬æ­£ã€éæ­§è§†çš„ç§‘æŠ€å‘å±•ç¯å¢ƒï¼ŒæŒ–æ˜ç–«åç»æµå¢é•¿æ–°åŠ¨èƒ½ï¼Œæºæ‰‹å®ç°è·¨è¶Šå‘å±•ã€‚&quot;: &quot;Seize the historic opportunities of the new round of technological revolution and industrial transformation, accelerate the transformation of scientific achievements into real productivity, create an open, fair, just, and non-discriminatory environment for technological development, explore new impetus for post-pandemic economic growth, and work together to achieve leapfrog development.&quot;,\n        &quot;â€”â€”åšæŒäººä¸è‡ªç„¶å’Œè°å…±ç”Ÿã€‚&quot;: &quot;- Adhere to harmonious coexistence between humans and nature:&quot;,\n        &quot;å®Œå–„å…¨çƒç¯å¢ƒæ²»ç†ï¼Œç§¯æåº”å¯¹æ°”å€™å˜åŒ–ï¼Œæ„å»ºäººä¸è‡ªç„¶ç”Ÿå‘½å…±åŒä½“ã€‚&quot;: &quot;Improve global environmental governance, actively address climate change, and build a community of life for all living things.&quot;,\n        &quot;åŠ å¿«ç»¿è‰²ä½ç¢³è½¬å‹ï¼Œå®ç°ç»¿è‰²å¤è‹å‘å±•ã€‚&quot;: &quot;Accelerate the green and low-carbon transformation, achieve green recovery and development.&quot;,\n  ......&#125;\n&#125;\n```</span></span><br></pre></td></tr></table></figure>

<p>ç”šè‡³è¿˜è¯•äº†ä¸€ä¸‹å¦‚æœæˆ‘å°†æ–‡ä¸­çš„æŸè‹±æ–‡ç»™åˆ é™¤æ‰ï¼Œçœ‹ä»–æœ€ç»ˆå‡ºæ¥çš„ç»“æœä¼šæ€ä¹ˆæ ·ã€‚æœ€ç»ˆå‘ç°ï¼Œgptä¼šè‡ªå·±ç¿»è¯‘ä¸€å¥è¯ï¼ŒæŠŠè¿™å¥è¯ç»™è¡¥ä¸Šï¼Œä¸è¿‡å¦‚æœè‹±æ–‡å¥å­åˆ å¤šäº†ï¼Œä»–å¯¹é½çš„æ•ˆæœå°±æ²¡é‚£ä¹ˆå¥½äº†ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œæˆ‘è§‰å¾—ä½¿ç”¨gptæ¥å¯¹é½ï¼Œæ˜¯å®Œå…¨å¯è¡Œçš„ï¼Œåªæ˜¯éœ€è¦ä¸æ–­å®Œå–„ï¼Œåšåˆ°è¿™è¿™é‡Œå…¶å®ä¹Ÿæœ‰è¿˜æœ‰ä¸€äº›é—®é¢˜æ²¡æœ‰å®ç°:</p>
<ul>
<li>å¦‚æœä¸Šä¼ çš„æ–‡æ¡£å­—æ•°å¤ªå¤šçš„è¯ï¼Œtokenä¼šè¶…å‡ºé™åˆ¶ï¼Œç›®å‰æˆ‘ä¹Ÿæ²¡æƒ³åˆ°è§£å†³çš„åŠæ³•ã€‚</li>
<li>å¦‚ä½•ä¿è¯gptä¸ä¼šä¿®æ”¹åŸæ–‡ï¼Œè¿™ä¸ªé—®é¢˜æˆ‘è§‰å¾—å¯ä»¥åœ¨æç¤ºè¯ä¸Šå†ä¼˜åŒ–</li>
<li>æœ‰æ—¶å€™ä¸­æ–‡çš„ä¸€ä¸ªå¥å­ä¹Ÿæ¯”è¾ƒé•¿ï¼ŒåŒ…å«äº†å¥½å‡ ä¸ªæ„ç¾¤ï¼Œå¦‚ä½•èƒ½å¤Ÿè¿›ä¸€æ­¥æ‹†åˆ†</li>
</ul>
<p>è¿™æ˜¯ç›®å‰æˆ‘èƒ½å¤Ÿæƒ³åˆ°çš„ä¸€äº›é—®é¢˜ã€‚</p>
<h2 id="ä¸€ç‚¹å°æ„Ÿæ‚Ÿ"><a href="#ä¸€ç‚¹å°æ„Ÿæ‚Ÿ" class="headerlink" title="ä¸€ç‚¹å°æ„Ÿæ‚Ÿ"></a>ä¸€ç‚¹å°æ„Ÿæ‚Ÿ</h2><p>ä½†æˆ‘è§‰å¾—ï¼Œå®Œæˆè¿™æ ·ä¸€ä¸ªå°çš„ç¨‹åºç¼–å†™ï¼Œæˆ‘å·²ç»å­¦ä¼šäº†å¾ˆå¤šã€‚åœ¨åšä¸­å­¦ï¼Œåœ¨åšä¸­æ€ï¼Œåšç€åšç€ï¼Œå°±ä¼šå‘ç°ä¸è¶³ï¼Œå°±ä¼šæ‰¾åˆ°é—®é¢˜ï¼Œæ…¢æ…¢çš„é€æ¸å®Œå–„èµ·æ¥äº†ã€‚ä»éœ€æ±‚å‡ºå‘ï¼Œæˆ‘è§‰å¾—æ‰æœ‰åšçš„åŠ¨åŠ›ï¼Œæ‰èƒ½è§£å†³å®é™…çš„é—®é¢˜ï¼Œæœ€åæˆ‘å°†è¿™ä¸ªç¨‹åºä½¿ç”¨streamlitå†™äº†ä¸€ä¸ªç®€é™‹çš„ç½‘é¡µï¼Œæ¥å®Œæˆæ‹–æ‹½ä¸Šä¼ ï¼Œè‡ªåŠ¨ä¸‹è½½excelã€‚ä¸è®ºè¿™ä¸ªç¨‹åºå®Œå–„ä¸å¦ï¼Œè‡³å°‘æ»¡è¶³äº†æˆ‘ä¸€å¼€å§‹çš„éœ€æ±‚ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æˆ‘çš„æ‰€æœ‰ä»£ç ï¼Œä¾›å¤§å®¶å‚è€ƒï¼Œå¦‚æœæœ‰å¥½çš„æƒ³æ³•ï¼Œå¯ä»¥ä¸€èµ·äº¤æµğŸ˜€</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> langchain.output_parsers <span class="keyword">import</span> StructuredOutputParser, ResponseSchema</span><br><span class="line"><span class="keyword">from</span> langchain.prompts <span class="keyword">import</span> ChatPromptTemplate, PromptTemplate</span><br><span class="line"><span class="keyword">from</span> langchain.chat_models <span class="keyword">import</span> ChatOpenAI</span><br><span class="line"><span class="keyword">import</span> openai</span><br><span class="line"><span class="keyword">import</span> docx</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> zip_longest</span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># load the document</span></span><br><span class="line">doc = docx.Document(<span class="string">&#x27;21-ä¹ è¿‘å¹³ æœºå™¨ç¿»è¯‘ AI.docx&#x27;</span>)</span><br><span class="line">chinese_paragraphs = []</span><br><span class="line">english_paragraphs = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> paragraph <span class="keyword">in</span> doc.paragraphs:</span><br><span class="line">    text = paragraph.text.strip()</span><br><span class="line">    <span class="keyword">if</span> re.search(<span class="string">&#x27;[\u4e00-\u9fff]&#x27;</span>, text):  <span class="comment"># åŒ¹é…ä¸­æ–‡å­—ç¬¦</span></span><br><span class="line">        chinese_paragraphs.append(text)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        english_paragraphs.append(text)</span><br><span class="line"></span><br><span class="line"><span class="comment">#connect each line into paragraphs</span></span><br><span class="line">chinese_paragraphs = <span class="string">&#x27;&#x27;</span>.join(chinese_paragraphs)</span><br><span class="line">english_paragraphs = <span class="string">&#x27;&#x27;</span>.join(english_paragraphs)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">split_sentences</span>(<span class="params">text</span>):</span><br><span class="line">    components = re.split(<span class="string">&#x27;([ã€‚ï¼ï¼Ÿ.!?:ï¼š])&#x27;</span>, text)  <span class="comment"># ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åˆ†å‰²å¥å­</span></span><br><span class="line">    sentences = [<span class="string">&quot;&quot;</span>.join(components[i:i+<span class="number">2</span>]) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(components)-<span class="number">1</span>, <span class="number">2</span>)]  <span class="comment"># å°†å¥å­å’Œæ ‡ç‚¹ç¬¦å·é‡æ–°ç»„åˆ</span></span><br><span class="line">    <span class="keyword">return</span> sentences</span><br><span class="line"></span><br><span class="line"><span class="comment"># connect the Chinese sentence list and the English paragraph as input text</span></span><br><span class="line">Chinese_sentences = split_sentences(chinese_paragraphs)</span><br><span class="line">input_text = <span class="built_in">str</span>(Chinese_sentences)+<span class="string">&#x27;\n&#x27;</span>+english_paragraphs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># load the api_key</span></span><br><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv, find_dotenv</span><br><span class="line">_ = load_dotenv(find_dotenv()) <span class="comment"># read local .env file</span></span><br><span class="line">openai.api_key = os.environ[<span class="string">&#x27;OPENAI_API_KEY&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># account for deprecation of LLM model</span></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line">current_date = datetime.datetime.now().date()</span><br><span class="line">target_date = datetime.date(<span class="number">2024</span>, <span class="number">6</span>, <span class="number">12</span>)</span><br><span class="line"><span class="keyword">if</span> current_date &gt; target_date:</span><br><span class="line">    llm_model = <span class="string">&quot;gpt-3.5-turbo&quot;</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    llm_model = <span class="string">&quot;gpt-3.5-turbo-0301&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># structured output template</span></span><br><span class="line">aligned_sentences= ResponseSchema(name=<span class="string">&quot;aligned_sentences&quot;</span>, </span><br><span class="line">    description = <span class="string">&#x27;add each Chiense and English sentence pair into here as a key-value pair&#x27;</span>)</span><br><span class="line">response_schemas = [aligned_sentences]</span><br><span class="line"></span><br><span class="line"><span class="comment"># output_parser to parse gpt&#x27;s response</span></span><br><span class="line">output_parser = StructuredOutputParser.from_response_schemas(response_schemas)</span><br><span class="line"></span><br><span class="line"><span class="comment"># format the structured output template</span></span><br><span class="line">format_instructions = output_parser.get_format_instructions()</span><br><span class="line">format_instructions</span><br><span class="line"></span><br><span class="line"><span class="comment"># prompt template</span></span><br><span class="line">template = <span class="string">&quot;&quot;&quot;ä½ ç°åœ¨æ˜¯ä¸€ä¸ªä¸­è‹±æ–‡æœ¬å¯¹é½å¸ˆï¼Œä½ å°†ä¼šå¾—åˆ°ä¸€ä¸ªå«æœ‰ä¸€ä¸ªä¸ªä¸­æ–‡å¥å­çš„åˆ—è¡¨å’Œä¸€ä¸ªè‹±æ–‡æ®µè½ï¼Œç°åœ¨ä½ éœ€è¦å°†è¿™ä¸€ä¸ªä¸ªä¸­æ–‡å¥å­çš„è‹±æ–‡ç¿»è¯‘åœ¨è‹±æ–‡æ®µè½ä¸­æ‰¾å‡ºæ¥\</span></span><br><span class="line"><span class="string">å¹¶å°†å®ƒä»¬å¯¹é½ä¸ºä¸€ä¸ªå¥å­å¯¹ã€‚æ¯”å¦‚ï¼Œä½ å…ˆä»å–ç¬¬ä¸€ä¸ªä¸­æ–‡å¥å­ï¼ŒæŒ‰ç…§è¿™ä¸ªä¸­æ–‡å¥å­çš„å¥æ„ï¼Œä»è‹±æ–‡æ®µè½å¼€å¤´å¼€å§‹åŒ¹é…ï¼Œå°†å’Œè¿™å¥ä¸­æ–‡å¥å­ç›¸åŒ¹é…çš„è‹±æ–‡å¥å­æ‹†åˆ†å‡ºæ¥ï¼ŒåŒè¿™å¥ä¸­æ–‡å¥å­å¯¹é½ã€‚\</span></span><br><span class="line"><span class="string">ç„¶åå°†è¿™ä¸€ä¸ªä¸­æ–‡å¥å­å’Œè‹±æ–‡å¥å­å¯¹é½ä¸ºä¸€ä¸ªå¥å­å¯¹å³å¯ã€‚ä¾æ¬¡å¯¹æ¯ä¸ªä¸­æ–‡å¥å­éƒ½æ‰§è¡Œè¿™ä¸€å¯¹é½æ“ä½œã€‚ç›´åˆ°å¯¹é½å®Œæ‰€æœ‰çš„ä¸­æ–‡å¥å­ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#123;format_instructions&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">text: &#123;text&#125;&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">align_prompt_template = ChatPromptTemplate.from_template(template)</span><br><span class="line"></span><br><span class="line"><span class="comment"># detailed prompt</span></span><br><span class="line">align_prompt = align_prompt_template.format_messages(text = input_text, format_instructions=format_instructions)</span><br><span class="line"></span><br><span class="line"><span class="comment">#call gpt</span></span><br><span class="line">chat = ChatOpenAI(temperature = <span class="number">0.7</span>, model = llm_model)</span><br><span class="line"></span><br><span class="line">response = chat(align_prompt)</span><br><span class="line"></span><br><span class="line"><span class="comment"># use parser to parse the structured output</span></span><br><span class="line">output_dict = output_parser.parse(response.content)[<span class="string">&#x27;aligned_sentences&#x27;</span>]</span><br><span class="line"><span class="built_in">type</span>(output_dict)</span><br><span class="line"></span><br><span class="line"><span class="comment"># convert json into DataFrame with keys and values as two columns</span></span><br><span class="line">df = pd.DataFrame.from_dict(output_dict, orient=<span class="string">&#x27;index&#x27;</span>).reset_index()</span><br><span class="line"></span><br><span class="line"><span class="comment"># name two columns</span></span><br><span class="line">df.columns = [<span class="string">&#x27;ä¸­æ–‡&#x27;</span>, <span class="string">&#x27;è‹±æ–‡&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># write DataFrame into a Excel file</span></span><br><span class="line">df.to_excel(<span class="string">&quot;output_1.xlsx&quot;</span>, index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹æ˜¯streamlitç½‘é¡µçš„ä»£ç ï¼š</p>
<p>å› ä¸ºæˆ‘ä¹‹å‰çš„æç¤ºè¯ï¼Œå®Œå…¨èƒ½å¤Ÿæ»¡è¶³æˆ‘çš„éœ€æ±‚ï¼Œæˆ‘éœ€è¦å¯¹é½çš„æ–‡æ¡£ï¼Œä¸­è‹±å­—æ•°ä¹Ÿæ²¡æœ‰è¶…è¿‡tokençš„é™åˆ¶ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨çš„ä¹‹å‰çš„æç¤ºè¯æ¨¡æ¿ã€‚</p>
<p>streamlitä¸­çš„ä»£ç ä¸»è¦æ˜¯å®Œå–„äº†ä¸€äº›å°çš„ç»†èŠ‚ï¼š</p>
<ul>
<li>è‡ªåŠ¨å‘½åexcelçš„æ–‡ä»¶</li>
<li>åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºæå–çš„ä¸­è‹±æ–‡æœ¬</li>
<li>ä½¿ç”¨zipé˜²æ­¢excelå•å…ƒæ ¼ä¸ºç©ºæŠ¥é”™</li>
<li>æ·»åŠ è®¿é—®çš„ä»£ç†</li>
<li>å¯ä»¥å¡«å…¥ä¸åŒçš„api_key</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> langchain.output_parsers <span class="keyword">import</span> StructuredOutputParser, ResponseSchema</span><br><span class="line"><span class="keyword">from</span> langchain.prompts <span class="keyword">import</span> ChatPromptTemplate, PromptTemplate</span><br><span class="line"><span class="keyword">from</span> langchain.chat_models <span class="keyword">import</span> ChatOpenAI</span><br><span class="line"><span class="keyword">import</span> openai</span><br><span class="line"><span class="keyword">from</span> docx <span class="keyword">import</span> Document</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> zip_longest</span><br><span class="line"><span class="keyword">import</span> streamlit <span class="keyword">as</span> st</span><br><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv, find_dotenv</span><br><span class="line"></span><br><span class="line">st.set_page_config(page_title=<span class="string">&quot;Bilingual Alignment&quot;</span>, page_icon=<span class="string">&quot;ğŸ“–&quot;</span>)</span><br><span class="line">st.markdown(<span class="string">&quot;# Bilingual Alignment&quot;</span>)</span><br><span class="line">st.sidebar.header(<span class="string">&quot;Bilingual Alignment&quot;</span>)</span><br><span class="line">st.write(</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    You can upload your bilingual doc(zh_EN or en_US). </span></span><br><span class="line"><span class="string">    This app will help you to align Chinese and English text and the last output an excel file</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">os.environ[<span class="string">&#x27;HTTP_PROXY&#x27;</span>] = <span class="string">&#x27;http:***&#x27;</span></span><br><span class="line">os.environ[<span class="string">&#x27;HTTPS_PROXY&#x27;</span>] = <span class="string">&#x27;http:***&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># account for deprecation of LLM model</span></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line">current_date = datetime.datetime.now().date()</span><br><span class="line">target_date = datetime.date(<span class="number">2024</span>, <span class="number">6</span>, <span class="number">12</span>)</span><br><span class="line"><span class="keyword">if</span> current_date &gt; target_date:</span><br><span class="line">    llm_model = <span class="string">&quot;gpt-3.5-turbo&quot;</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    llm_model = <span class="string">&quot;gpt-3.5-turbo-0301&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">extract_paragraphs</span>(<span class="params">docx_file</span>):</span><br><span class="line">    <span class="comment">#extract text from the document</span></span><br><span class="line">    doc = Document(docx_file)</span><br><span class="line">    chinese_paragraphs = []</span><br><span class="line">    english_paragraphs = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> paragraph <span class="keyword">in</span> doc.paragraphs:</span><br><span class="line">        text = paragraph.text.strip()</span><br><span class="line">        <span class="keyword">if</span> re.search(<span class="string">&#x27;[\u4e00-\u9fff]&#x27;</span>, text):  <span class="comment"># åŒ¹é…ä¸­æ–‡å­—ç¬¦</span></span><br><span class="line">            chinese_paragraphs.append(text)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            english_paragraphs.append(text)</span><br><span class="line">    chinese_paragraphs = <span class="string">&#x27;&#x27;</span>.join(chinese_paragraphs)</span><br><span class="line">    english_paragraphs = <span class="string">&#x27;&#x27;</span>.join(english_paragraphs)</span><br><span class="line">    input_text = english_paragraphs + <span class="string">&#x27;\n&#x27;</span> + chinese_paragraphs</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> input_text</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">prompt_template</span>():</span><br><span class="line">    <span class="comment"># Define the prompt template</span></span><br><span class="line">    Chinese_sentences= ResponseSchema(name=<span class="string">&quot;Chinese_sentences&quot;</span>, <span class="built_in">type</span> = <span class="string">&#x27;list&#x27;</span>, </span><br><span class="line">                                        description = <span class="string">&#x27;add each Chiense sentences into this list&#x27;</span>)</span><br><span class="line">    English_sentences= ResponseSchema(name=<span class="string">&quot;English_sentences&quot;</span>, <span class="built_in">type</span> = <span class="string">&#x27;list&#x27;</span>,</span><br><span class="line">                                        description = <span class="string">&#x27;add each English sentence into this list&#x27;</span>)</span><br><span class="line">    response_schemas = [Chinese_sentences,English_sentences]</span><br><span class="line">    output_parser = StructuredOutputParser.from_response_schemas(response_schemas)</span><br><span class="line">    format_instructions = output_parser.get_format_instructions()</span><br><span class="line">    </span><br><span class="line">    template = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    ä½ ç°åœ¨æ˜¯ä¸€ä¸ªä¸­è‹±æ–‡æœ¬å¯¹é½å¸ˆï¼Œç°åœ¨ä½ éœ€è¦å°†ä¸­è‹±æ–‡åˆ†å¥åæŒ‰ç…§å¥æ„å¯¹é½ï¼ŒåŠæ³•æ˜¯è¿™æ ·ï¼š\</span></span><br><span class="line"><span class="string">    é¦–å…ˆå°†ä¸­è‹±æ–‡åˆ†å¥å¹¶åˆ†åˆ«æ’åºï¼Œç„¶åæ‹¿å‡ºä¸­æ–‡çš„ç¬¬ä¸€å¥ï¼Œæ£€æµ‹è‹±æ–‡ç¬¬2å¥å¥æ„æ˜¯å¦åœ¨ä¸­æ–‡çš„ç¬¬ä¸€å¥ä¸­ã€‚\</span></span><br><span class="line"><span class="string">    å¦‚æœ‰ï¼Œåˆ™å°†è‹±æ–‡çš„1ã€2å¥ä¸€èµ·ä¸ä¸­æ–‡çš„ç¬¬ä¸€å¥å¯¹é½ï¼Œå¦‚æ²¡æœ‰ï¼Œåˆ™åªå°†è‹±æ–‡çš„ç¬¬ä¸€å¥ä¸ä¸­æ–‡çš„ç¬¬ä¸€å¥å¯¹é½ï¼›\</span></span><br><span class="line"><span class="string">    ç„¶åæ£€æµ‹ä¸­æ–‡çš„ç¬¬äºŒå¥å¥æ„æ˜¯å¦åœ¨è‹±æ–‡çš„ç¬¬ä¸€å¥ä¸­ã€‚å¦‚æœ‰ï¼Œåˆ™å°†ä¸­æ–‡çš„1ã€2å¥ä¸€èµ·ä¸è‹±æ–‡çš„ç¬¬ä¸€å¥å¯¹é½ï¼Œå¦‚æ²¡æœ‰ï¼Œ\</span></span><br><span class="line"><span class="string">    åˆ™åªå°†ä¸­æ–‡çš„ç¬¬ä¸€å¥ä¸è‹±æ–‡çš„ç¬¬ä¸€å¥å¯¹é½ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå°†æˆ‘å‘ç»™ä½ çš„æ‰€æœ‰æ–‡æœ¬æŒ‰ç…§å¥æ„å¯¹é½ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &#123;format_instructions&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    text: &#123;text&#125;&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> template, format_instructions, output_parser</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">call_gpt</span>(<span class="params">template,input_text,format_instructions,output_parser</span>):</span><br><span class="line">    _ = load_dotenv(find_dotenv()) <span class="comment"># read local .env file</span></span><br><span class="line">    openai.api_key = os.environ[<span class="string">&#x27;OPENAI_API_KEY&#x27;</span>]</span><br><span class="line">    <span class="comment">#call gpt to answer  </span></span><br><span class="line">    align_prompt_template = ChatPromptTemplate.from_template(template)</span><br><span class="line">    align_prompt = align_prompt_template.format_messages(text = input_text,</span><br><span class="line">                                                        format_instructions=format_instructions)</span><br><span class="line">    chat = ChatOpenAI(temperature = <span class="number">0.7</span>, model = llm_model)</span><br><span class="line">    response = chat(align_prompt)</span><br><span class="line">    <span class="built_in">print</span>(response.content)</span><br><span class="line">    <span class="comment"># Parse the response and output to a excel file</span></span><br><span class="line"></span><br><span class="line">    Chinese_sentence_list = output_parser.parse(response.content)[<span class="string">&quot;Chinese_sentences&quot;</span>]</span><br><span class="line">    English_sentence_list = output_parser.parse(response.content)[<span class="string">&quot;English_sentences&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Chinese_sentence_list, English_sentence_list</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">write_excel</span>(<span class="params">Chinese_sentence_list, English_sentence_list, base_filename</span>):</span><br><span class="line">    st.write(<span class="string">&quot;æ­£åœ¨å†™å…¥excelæ–‡ä»¶&quot;</span>)</span><br><span class="line">    zipped = zip_longest(English_sentence_list, Chinese_sentence_list)</span><br><span class="line">    <span class="comment"># create a DataFrame </span></span><br><span class="line">    df = pd.DataFrame(zipped, columns = [<span class="string">&quot;è‹±æ–‡&quot;</span>,<span class="string">&quot;ä¸­æ–‡&quot;</span>])</span><br><span class="line">    <span class="comment"># write it into a excel file</span></span><br><span class="line">    excel_filename = <span class="string">f&#x27;<span class="subst">&#123;base_filename&#125;</span>_output.xlsx&#x27;</span></span><br><span class="line">    df.to_excel(excel_filename, index=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    uploaded_file = st.file_uploader(<span class="string">&quot;ä¸Šä¼ ä¸­è‹±æ–‡åŒè¯­Wordæ–‡æ¡£&quot;</span>, <span class="built_in">type</span>=[<span class="string">&quot;docx&quot;</span>])</span><br><span class="line">    <span class="keyword">if</span> uploaded_file <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="comment"># get the name of the uploaded file</span></span><br><span class="line">        uploaded_filename = uploaded_file.name</span><br><span class="line">        <span class="comment"># remove the extension of the name</span></span><br><span class="line">        base_filename = os.path.splitext(uploaded_filename)[<span class="number">0</span>]</span><br><span class="line">        input_text = extract_paragraphs(uploaded_file)</span><br><span class="line">        st.write(<span class="string">&quot;ä¸­è‹±æ–‡æœ¬&quot;</span>)</span><br><span class="line">        st.write(input_text)</span><br><span class="line">        template, format_instructions, output_parser = prompt_template()</span><br><span class="line">        Chinese_sentence_list, English_sentence_list = call_gpt(template,input_text,format_instructions,output_parser)</span><br><span class="line">        write_excel(Chinese_sentence_list, English_sentence_list, base_filename)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

                </div>

                

                <div class="post-bottom-tags-and-share border-box">
                    <div>
                        
                            <ul class="post-tags-box border-box">
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/Langchain/">Langchain</a>
                                    </li>
                                
                            </ul>
                        
                    </div>
                    <div>
                        
                            <div class="post-share-container border-box">
    <ul class="share-list-wrap border-box">
        <li class="qq share-item border-box flex-center tooltip"
            data-tooltip-content="åˆ†äº«åˆ° QQ"
        >
            <i class="fa-brands fa-qq"></i>
        </li>
        <li class="wechat share-item border-box flex-center tooltip tooltip-img"
            data-tooltip-content="åˆ†äº«åˆ°å¾®ä¿¡"
            data-tooltip-img-tip="å¾®ä¿¡æ‰«ä¸€æ‰«"
            data-tooltip-img-style="background-color: #fff; top: -10px; padding: 0.6rem 0.6rem 0.1rem 0.6rem;"
        >
            <i class="fa-brands fa-weixin"></i>
        </li>
        <li class="weibo share-item border-box flex-center tooltip"
            data-tooltip-content="åˆ†äº«åˆ°å¾®åš"
        >
            <i class="fa-brands fa-weibo"></i>
        </li>
    </ul>
</div>

                        
                    </div>
                </div>

                

                
                    <div class="post-nav border-box">
                        
                            <div class="prev-post">
                                <a class="prev"
                                   rel="prev"
                                   href="/2024/01/06/listary&everything-more-powerful-search/"
                                   title="Listary + Everything"
                                >
                                    <span class="left arrow-icon flex-center">
                                        <i class="fas fa-chevron-left"></i>
                                    </span>
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">Listary + Everything</span>
                                        <span class="post-nav-item">ä¸Šä¸€ç¯‡</span>
                                    </span>
                                </a>
                            </div>
                        
                        
                            <div class="next-post">
                                <a class="next"
                                   rel="next"
                                   href="/2023/12/23/How-to-create-pull-request/"
                                   title="Technical writerå°ç™½å¦‚ä½•æˆä¸ºå¼€æºé¡¹ç›®çš„è´¡çŒ®è€…ï¼Ÿ"
                                >
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">Technical writerå°ç™½å¦‚ä½•æˆä¸ºå¼€æºé¡¹ç›®çš„è´¡çŒ®è€…ï¼Ÿ</span>
                                        <span class="post-nav-item">ä¸‹ä¸€ç¯‡</span>
                                    </span>
                                    <span class="right arrow-icon flex-center">
                                        <i class="fas fa-chevron-right"></i>
                                    </span>
                                </a>
                            </div>
                        
                    </div>
                

                
                    


    <div class="comments-container border-box">
        <div id="comments-anchor" class="comment-area-title border-box">
            <i class="fas fa-comments"></i>&nbsp;è¯„è®º
        </div>
        <div class="comment-plugin-fail border-box">
    <span class="fail-tip">è¯„è®ºæ’ä»¶åŠ è½½å¤±è´¥</span>
    <button class="reload keep-button">ç‚¹å‡»é‡æ–°åŠ è½½</button>
</div>
<div class="comment-plugin-loading flex-center border-box">
    <i class="loading-icon fa-solid fa-spinner fa-spin"></i>
    <span class="load-tip">æ­£åœ¨åŠ è½½è¯„è®ºæ’ä»¶</span>
</div>
<script data-pjax>
  window.KeepCommentPlugin = {}
  window.KeepCommentPlugin.hideLoading = () => {
    const cplDom = document.querySelector('.comments-container .comment-plugin-loading')
    cplDom.style.display = 'none'
  }
  window.KeepCommentPlugin.loadFailHandle = () => {
    window.KeepCommentPlugin.hideLoading()
    const cpfDom = document.querySelector('.comments-container .comment-plugin-fail')
    cpfDom.style.display = 'flex'
    cpfDom.querySelector('.reload').addEventListener('click', () => {
      window.location.reload()
    })
  }
</script>

        
            

    <div class="waline-comment-container">
        <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@waline/client@v2/dist/waline.css"/>
        <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@waline/client@v2/dist/waline-meta.css"/>
        <div id="waline-comment"></div>
        <script 
                src="//cdn.jsdelivr.net/npm/@waline/client@v2/dist/waline.js"
                async
                onerror="window.KeepCommentPlugin.loadFailHandle()"
        ></script>
        <script 
                async
        >
          window.KeepCommentPlugin.walineOptions = JSON.parse('{}'.replace(/&#34;/g, '"'))

          window.KeepCommentPlugin.initWaline = () => {
            if (window?.Waline) {
              window.KeepCommentPlugin.walineOptions.el = '#waline-comment'
              window.KeepCommentPlugin.walineOptions.comment = '.post-comments-count'
              window.KeepCommentPlugin.walineOptions.serverURL = 'https://blog-waline-comment-n8zq4tn4g-robertcheng-956s-projects.vercel.app/'
              window.KeepCommentPlugin.walineOptions.lang = 'zh-CN' || 'zh-CN'
              window.KeepCommentPlugin.walineOptions.reaction = 'false' === 'true'
              window.Waline.init(window.KeepCommentPlugin.walineOptions)
              window.KeepCommentPlugin.hideLoading()
            } else {
              setTimeout(() => {
                window.KeepCommentPlugin.initWaline()
              }, 1000)
            }
          }

          if ('false' === 'true') {
            setTimeout(() => {
              window.KeepCommentPlugin.initWaline()
            }, 1200)
          } else {
            window.addEventListener('DOMContentLoaded', window.KeepCommentPlugin.initWaline)
          }
        </script>
    </div>


        
    </div>





                
            </div>
        </div>

        
            <div class="pc-post-toc right-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%B0%9D%E8%AF%95"><span class="nav-number">1.</span> <span class="nav-text">ç¬¬ä¸€æ¬¡å°è¯•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E6%AC%A1%E5%B0%9D%E8%AF%95"><span class="nav-number">2.</span> <span class="nav-text">ç¬¬äºŒæ¬¡å°è¯•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E6%AC%A1%E5%B0%9D%E8%AF%95"><span class="nav-number">3.</span> <span class="nav-text">ç¬¬ä¸‰æ¬¡å°è¯•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E7%82%B9%E5%B0%8F%E6%84%9F%E6%82%9F"><span class="nav-number">4.</span> <span class="nav-text">ä¸€ç‚¹å°æ„Ÿæ‚Ÿ</span></a></li></ol>
    </div>
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom border-box">
            
<footer class="footer border-box">
    <div class="border-box website-info-box default">
        
            <div class="copyright-info info-item default">
                &copy;&nbsp;<span>2020</span>&nbsp;-&nbsp;2024
                
                    &nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;&nbsp;<a href="/">Ray Cheng</a>
                
            </div>

            <div class="theme-info info-item default">
                ç”±&nbsp;<a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;é©±åŠ¨&nbsp;&&nbsp;ä¸»é¢˜&nbsp;<a class="keep-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep</a>
            </div>

            

            
                
                <div class="deploy-info info-item default">
                    
                        æœ¬ç«™ç”± <span class="tooltip" data-tooltip-content="GitHub Pages"><img src="/images/deploy-provider/github.png"></span> æä¾›éƒ¨ç½²æœåŠ¡
                    
                </div>
            
        

        <div class="count-item info-item default">
            
                <span class="count-box border-box word">
                    <span class="item-type border-box">æ€»å­—æ•°</span>
                    <span class="item-value border-box word">8.7k</span>
                </span>
            

            

            
        </div>
    </div>
</footer>

        </div>
    </div>

    <!-- post tools -->
    
        <div class="post-tools right-toc">
            <div class="post-tools-container border-box">
    <ul class="tools-list border-box">
        <!-- PC TOC show toggle -->
        
            <li class="tools-item flex-center toggle-show-toc">
                <i class="fas fa-list"></i>
            </li>
        

        <!-- PC go comment -->
        
            <li class="tools-item flex-center go-to-comments">
                <i class="fas fa-comment"></i>
                <span class="post-comments-count"></span>
            </li>
        
    </ul>
</div>

        </div>
    

    <!-- side tools -->
    <div class="side-tools">
        <div class="side-tools-container border-box ">
    <ul class="side-tools-list side-tools-show-handle border-box">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-toggle-theme-mode flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list border-box">
        
            <li class="tools-item toggle-show-toc-tablet flex-center">
                <i class="fas fa-list"></i>
            </li>
        

        
            <li class="tools-item go-to-comments-tablet flex-center">
                <i class="fas fa-comment"></i>
            </li>
        

        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>

        <li class="tools-item tool-scroll-to-top flex-center show-arrow">
            <i class="arrow fas fa-arrow-up"></i>
            <span class="percent"></span>
        </li>
    </ul>
</div>

    </div>

    <!-- image mask -->
    <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


    <!-- local search -->
    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="æœç´¢..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="close-popup-btn">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

    <!-- tablet toc -->
    
        <div class="tablet-post-toc-mask">
            <div class="tablet-post-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%B0%9D%E8%AF%95"><span class="nav-number">1.</span> <span class="nav-text">ç¬¬ä¸€æ¬¡å°è¯•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E6%AC%A1%E5%B0%9D%E8%AF%95"><span class="nav-number">2.</span> <span class="nav-text">ç¬¬äºŒæ¬¡å°è¯•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E6%AC%A1%E5%B0%9D%E8%AF%95"><span class="nav-number">3.</span> <span class="nav-text">ç¬¬ä¸‰æ¬¡å°è¯•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E7%82%B9%E5%B0%8F%E6%84%9F%E6%82%9F"><span class="nav-number">4.</span> <span class="nav-text">ä¸€ç‚¹å°æ„Ÿæ‚Ÿ</span></a></li></ol>
    </div>
</div>

            </div>
        </div>
    
</main>



<!-- common -->
<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.0.5/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.0.5/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.0.5/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.0.5/source/js/toggle-theme.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.0.5/source/js/code-block.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.0.5/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.0.5/source/js/libs/anime.min.js"></script>

<!-- local-search -->

    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.0.5/source/js/local-search.js"></script>


<!-- lazyload -->

    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.0.5/source/js/lazyload.js"></script>


<div class="">
    
        <!-- post-helper -->
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.0.5/source/js/post/post-helper.js"></script>

        <!-- toc -->
        
            <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.0.5/source/js/post/toc.js"></script>
        

        <!-- copyright-info -->
        

        <!-- share -->
        
            <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@4.0.5/source/js/post/share.js"></script>
        
    

    <!-- category-page -->
    

    <!-- links-page -->
    

    <!-- photos-page -->
    
</div>

<!-- mermaid -->


<!-- pjax -->



    
        
    

</body>
</html>
